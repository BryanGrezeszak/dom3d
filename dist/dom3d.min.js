!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||(t=window),t.DisplayObject3D=a.default,t.Stage3D=u.default,t.Group3D=c.default,t.Element3D=f.default,t.PaperElement3D=y.default,t.StageEvent=D.default,t.DepthOfField=z.default,e&&(t.Point3D=v.default,t.Matrix3x3=m.default,t.EulerAngle=_.default,t.Quaternion=k.default,t.Transform3D=x.default)}Object.defineProperty(e,"__esModule",{value:!0}),e.DepthOfField=e.StageEvent=e.Transform3D=e.Quaternion=e.EulerAngle=e.Matrix3x3=e.Point3D=e.PaperElement3D=e.Element3D=e.Group3D=e.Stage3D=e.DisplayObject3D=e.spread=void 0;var o=n(1),a=r(o),s=n(10),u=r(s),l=n(13),c=r(l),h=n(14),f=r(h),d=n(15),y=r(d),p=n(5),v=r(p),g=n(2),m=r(g),b=n(7),_=r(b),w=n(6),k=r(w),O=n(4),x=r(O),E=n(11),D=r(E),P=n(16),z=r(P);e.spread=i,e.DisplayObject3D=a.default,e.Stage3D=u.default,e.Group3D=c.default,e.Element3D=f.default,e.PaperElement3D=y.default,e.Point3D=v.default,e.Matrix3x3=m.default,e.EulerAngle=_.default,e.Quaternion=k.default,e.Transform3D=x.default,e.StageEvent=D.default,e.DepthOfField=z.default,Object.defineProperty(e,"default",{get:function(){return e}}),"undefined"!=typeof window&&(window.dom3d={spread:i},i(window.dom3d,!0))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(2),s=r(a),u=n(4),l=r(u),c=n(8),h=r(c),f=n(3),d=n(9),y=r(d),p=function(){function t(){i(this,t),this._x=0,this._y=0,this._z=0,this._rotX=0,this._rotY=0,this._rotZ=0,this._regX=0,this._regY=0,this._dirty=!0,this.matrix=new s.default,this.transform3D=new l.default,this.id="",this.element=null,this.stage=null,this.parent=null,this.calc=new h.default(this)}return o(t,[{key:"addEventListener",value:function(){throw new Error(v)}},{key:"removeEventListener",value:function(){throw new Error(v)}},{key:"dispatchEvent",value:function(){throw new Error(v)}},{key:"addListener",value:function(t,e,n,r){return this.element.addEventListener(t,e,n,r)}},{key:"removeListener",value:function(t,e,n){return this.element.removeEventListener(t,e,n)}},{key:"dispatch",value:function(t){return this.element.dispatchEvent(t)}},{key:"setStage",value:function(t){this.stage=t}},{key:"render",value:function(t){throw new Error("::DOM3D:: DisplayObject3D can not be part of the 3D scene, it is only a base class.")}},{key:"updateWorld",value:function(){this.transform3D.copyConcatenated(this.parent.transform3D),this.transform3D.eulerAngle.updateData(this._rotZ*f.TO_RAD,this._rotY*f.TO_RAD,this._rotX*f.TO_RAD),this.transform3D.quaternion.updateFromEuler(this.transform3D.eulerAngle),this.transform3D.coordinates.updateData(this._x,this._y,this._z),this.transform3D.concatenatedQuaternion.concatenate(this.transform3D.quaternion),this.transform3D.concatenatedEulerAngle.updateFromQuaternion(this.transform3D.concatenatedQuaternion)}},{key:"rotateCoords",value:function(){this.transform3D.concatenatedCoordinates.rotateAndUpdate(this.transform3D.coordinates,this.parent.transform3D.concatenatedEulerAngle)}},{key:"rotateObject",value:function(){this.transformMatrix.updateFromEuler(this.transform3D.concatenatedEulerAngle)}},{key:"renderObject",value:function(){var t=this.transformMatrix,e=this.stage.zoom,n=this.transform3D.concatenatedCoordinates,r=this.parent.orthographic||this.stage.orthographic?this.parent.transform3D.concatenatedCoordinates.z:n.z;if(r>e)return void(this.element.style.display="none");"none"===this.element.style.display&&(this.element.style.display="block");var i=e/(e-r),o=Math.pow(i,this.stage.distortion);t.tx=n.x*i,t.ty=n.y*i,t.scale(o);var a=this.regX*i*o,s=this.regY*i*o,u="matrix("+t.a.toFixed(8)+","+t.b.toFixed(8)+","+t.c.toFixed(8)+","+t.d.toFixed(8)+","+(t.tx-a).toFixed(8)+","+(t.ty-s).toFixed(8)+")",l=this.regX+"px "+this.regY+"px";this.element.style[y.default.transform]=u,this.element.style[y.default.transformOrigin]=l;for(var c=0,h=this.stage.effects.length;c<h;c++){var f=this.stage.effects[c];f.render(this)}}},{key:"x",get:function(){return this._x},set:function(t){t!=this._x&&(this._dirty=!0,this._x=t)}},{key:"y",get:function(){return this._y},set:function(t){t!=this._y&&(this._dirty=!0,this._y=t)}},{key:"z",get:function(){return this._z},set:function(t){t!=this._z&&(this._dirty=!0,this._z=t)}},{key:"rotX",get:function(){return this._rotX},set:function(t){t!=this._rotX&&(this._dirty=!0,this._rotX=t)}},{key:"rotY",get:function(){return this._rotY},set:function(t){t!=this._rotY&&(this._dirty=!0,this._rotY=t)}},{key:"rotZ",get:function(){return this._rotZ},set:function(t){t!=this._rotZ&&(this._dirty=!0,this._rotZ=t)}},{key:"regX",get:function(){return this._regX},set:function(t){t!=this._regX&&(this._dirty=!0,this._regX=t)}},{key:"regY",get:function(){return this._regY},set:function(t){t!=this._regY&&(this._dirty=!0,this._regY=t)}},{key:"style",get:function(){return this.element.style}}]),t}();e.default=p,p.idCount=0;var v="::DOM3D:: Events are handled on the `.element` property. You may access it directly, or use the `addListener`, `.removeListener`, and `.dispatch` shortcuts."},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r(this,t),this.a=e,this.b=n,this.c=i,this.d=o,this.tx=a,this.ty=s}return i(t,[{key:"scale",value:function(t){this.a*=t,this.b*=t,this.c*=t,this.d*=t,this.tx*=t,this.ty*=t}},{key:"zero",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}},{key:"copy",value:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty}},{key:"updateFromEuler",value:function(t){var e=(0,o.sin)(t.phi),n=(0,o.cos)(t.phi),r=(0,o.sin)(t.theta),i=(0,o.cos)(t.theta),a=(0,o.sin)(t.psi),s=(0,o.cos)(t.psi),u=n*s,l=e*s,c=r*a,h=c+i,f=c-i,d=-n*f+l,y=-e*f-u,p=-n*h+l,v=-e*h-u;this.a=(d-p)/2,this.b=(y-v)/2,this.c=-(d+p)/2,this.d=-(y+v)/2}},{key:"toString",value:function(){return"{a:"+this.a+", b:"+this.b+", c:"+this.c+", d:"+this.d+", tx:"+this.tx+", ty:"+this.ty+"}"}}]),t}();e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(e.asin=Math.asin,e.sqrt=Math.sqrt,e.atan2=Math.atan2,e.cos=Math.cos,e.sin=Math.sin,e.PI=Math.PI);e.TO_RAD=n/180,e.TO_DEG=180/n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(5),s=r(a),u=n(6),l=r(u),c=n(7),h=r(c),f=function(){function t(){i(this,t),this.coordinates=new s.default,this.concatenatedCoordinates=new s.default,this.quaternion=new l.default,this.concatenatedQuaternion=new l.default,this.eulerAngle=new h.default,this.concatenatedEulerAngle=new h.default}return o(t,[{key:"copyConcatenated",value:function(t){this.concatenatedCoordinates.copy(t.concatenatedCoordinates),this.concatenatedQuaternion.copy(t.concatenatedQuaternion),this.concatenatedEulerAngle.copy(t.concatenatedEulerAngle)}},{key:"copyInverseConcatenated",value:function(t){this.concatenatedCoordinates.copyInverse(t.concatenatedCoordinates),this.concatenatedQuaternion.copyInverse(t.concatenatedQuaternion),this.concatenatedEulerAngle.updateFromQuaternion(concatenatedQuaternion)}},{key:"copyLocal",value:function(t){this.coordinates.copy(t.coordinates),this.quaternion.copy(t.quaternion),this.eulerAngle.copy(t.eulerAngle)}},{key:"copy",value:function(t){this.coordinates.copy(t.coordinates),this.concatenatedCoordinates.copy(t.concatenatedCoordinates),this.quaternion.copy(t.quaternion),this.concatenatedQuaternion.copy(t.concatenatedQuaternion),this.eulerAngle.copy(t.eulerAngle),this.concatenatedEulerAngle.copy(t.concatenatedEulerAngle)}},{key:"zero",value:function(){this.coordinates.zero(),this.concatenatedCoordinates.zero(),this.quaternion.zero(),this.concatenatedQuaternion.zero(),this.eulerAngle.zero(),this.concatenatedEulerAngle.zero()}},{key:"toString",value:function(){return"local coordinates: "+this.coordinates.toString()+"\nworld coordinates: "+this.concatenatedCoordinates.toString()+"\nlocal quaternion : "+this.quaternion.toString()+"\nworld quaternion : "+this.concatenatedQuaternion.toString()+"\nlocal euler angle: "+this.eulerAngle.toString()+"\nworld euler angle: "+this.concatenatedEulerAngle.toString()}}]),t}();e.default=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),this.x=e,this.y=n,this.z=i}return i(t,[{key:"updateData",value:function(t,e,n){this.x=t,this.y=e,this.z=n}},{key:"rotateAndUpdate",value:function(t,e){var n,r,i,a,s,u,l=e.phi,c=e.theta,h=e.psi,f=(0,o.sin)(l),d=(0,o.cos)(l),y=(0,o.sin)(c),p=(0,o.cos)(c),v=(0,o.sin)(h),g=(0,o.cos)(h),m=t.x,b=t.y,_=t.z;n=g*b-v*_,r=v*b+g*_,a=p*r-y*m,i=y*r+p*m,s=d*i-f*n,u=f*i+d*n,this.x+=s,this.y+=u,this.z+=a}},{key:"clone",value:function(){return new t(this.x,this.y,this.z)}},{key:"copy",value:function(t){this.x=t.x,this.y=t.y,this.z=t.z}},{key:"copyInverse",value:function(t){this.x=-t.x,this.y=-t.y,this.z=-t.z}},{key:"zero",value:function(){this.x=0,this.y=0,this.z=0}},{key:"toString",value:function(){return"{x:"+this.x+", y:"+this.y+", z:"+this.z+"}"}}],[{key:"rotate",value:function(e,n){var r,i,a,s,u,l,c=n.phi,h=n.theta,f=n.psi,d=(0,o.sin)(c),y=(0,o.cos)(c),p=(0,o.sin)(h),v=(0,o.cos)(h),g=(0,o.sin)(f),m=(0,o.cos)(f),b=e.x,_=e.y,w=e.z;return r=m*_-g*w,i=g*_+m*w,s=v*i-p*b,a=p*i+v*b,u=y*a-d*r,l=d*a+y*r,new t(u,l,s)}},{key:"distance",value:function(t,e){var n=Math.pow(e.x-t.x,2),r=Math.pow(e.y-t.y,2),i=Math.pow(e.z-t.z,2);return Math.sqrt(n+r+i)}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(7),s=r(a),u=n(3),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.w=e,this.x=n,this.y=r,this.z=o}return o(t,[{key:"updateData",value:function(t,e,n,r){this.w=t,this.x=e,this.y=n,this.z=r}},{key:"concatenate",value:function(t){var e=t.w,n=t.x,r=t.y,i=t.z,o=this.w,a=this.x,s=this.y,u=this.z,l=e*o-n*a-r*s-i*u,c=e*a+n*o+r*u-i*s,h=e*s-n*u+r*o+i*a,f=e*u+n*s-r*a+i*o;this.w=l,this.x=c,this.y=h,this.z=f}},{key:"toEuler",value:function(){var t,e,n,r=(this.w*this.w,this.x*this.x),i=this.y*this.y,o=this.z*this.z,a=this.w*this.y-this.z*this.x;return a>.499999?(t=-2*(0,u.atan2)(this.w,this.x),e=Math.PI/2,n=Math.PI,new s.default(t,e,n)):a<-.499999?(t=-2*(0,u.atan2)(this.w,this.x),e=-Math.PI/2,n=Math.PI,new s.default(t,e,n)):(t=(0,u.atan2)(2*(this.w*this.x+this.y*this.z),1-2*(r+i)),e=(0,u.asin)(2*a),n=(0,u.atan2)(2*(this.w*this.z+this.x*this.y),1-2*(i+o)),new s.default(t,e,n))}},{key:"updateFromEuler",value:function(t){var e=t.phi/2,n=t.theta/2,r=t.psi/2,i=(0,u.sin)(e),o=(0,u.cos)(e),a=(0,u.sin)(n),s=(0,u.cos)(n),l=(0,u.sin)(r),c=(0,u.cos)(r);this.w=o*s*c+i*a*l,this.x=i*s*c-o*a*l,this.y=o*a*c+i*s*l,this.z=o*s*l-i*a*c}},{key:"normalize",value:function(){var t=(0,u.sqrt)(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z);this.w/=t,this.x/=t,this.y/=t,this.z/=t}},{key:"clone",value:function(){return new t(this.w,this.x,this.y,this.z)}},{key:"copy",value:function(t){this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z}},{key:"copyInverse",value:function(t){var e=t.w,n=t.x,r=t.y,i=t.z,o=e*e+n*n+r*r+i*i;this.w=e/o,this.x=-n/o,this.y=-r/o,this.z=-i/o}},{key:"zero",value:function(){this.w=1,this.x=0,this.y=0,this.z=0}},{key:"toString",value:function(){return"{w:"+this.w+", x:"+this.x+", y:"+this.y+", z:"+this.z+"}"}}],[{key:"multiply",value:function(e,n){var r=e.w,i=n.w,o=e.x,a=n.x,s=e.y,u=n.y,l=e.z,c=n.z,h=r*i-o*a-s*u-l*c,f=r*a+o*i+s*c-l*u,d=r*u-o*c+s*i+l*a,y=r*c+o*u-s*a+l*i;return new t(h,f,d,y)}}]),t}();e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(6),s=r(a),u=n(3),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),this.phi=e,this.theta=n,this.psi=r}return o(t,[{key:"updateData",value:function(t,e,n){this.phi=t,this.theta=e,this.psi=n}},{key:"updateFromQuaternion",value:function(t){var e=t.w,n=t.x,r=t.y,i=t.z,o=n*n,a=r*r,s=i*i,l=e*r-i*n;return l>.499999?(this.phi=-2*(0,u.atan2)(e,n),this.theta=Math.PI/2,void(this.psi=Math.PI)):l<-.499999?(this.phi=-2*(0,u.atan2)(e,n),this.theta=-Math.PI/2,void(this.psi=Math.PI)):(this.phi=(0,u.atan2)(2*(e*n+r*i),1-2*(o+a)),this.theta=(0,u.asin)(2*l),void(this.psi=(0,u.atan2)(2*(e*i+n*r),1-2*(a+s))))}},{key:"toQuaternion",value:function(){var t=this.phi/2,e=this.theta/2,n=this.psi/2,r=(0,u.sin)(t),i=(0,u.cos)(t),o=(0,u.sin)(e),a=(0,u.cos)(e),l=(0,u.sin)(n),c=(0,u.cos)(n),h=i*a*c+r*o*l,f=r*a*c-i*o*l,d=i*o*c+r*a*l,y=i*a*l-r*o*c;return new s.default(h,f,d,y)}},{key:"clone",value:function(){return new t(this.phi,this.theta,this.psi)}},{key:"copy",value:function(t){this.phi=t.phi,this.theta=t.theta,this.psi=t.psi}},{key:"zero",value:function(){this.phi=0,this.theta=0,this.psi=0}},{key:"toString",value:function(){return"{phi:"+this.phi+", theta:"+this.theta+", psi:"+this.psi+"}"}}]),t}();e.default=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),a=function(){function t(e){r(this,t),Object.defineProperty(this,"reference",{enumerable:!1,value:e})}return i(t,[{key:"toString",value:function(){return"{x:"+this.x+", y:"+this.y+", z:"+this.z+", rotX:"+this.rotX+", rotY:"+this.rotY+", rotZ:"+this.rotZ+"}"}},{key:"x",get:function(){return this.reference.transform3D.concatenatedCoordinates.x}},{key:"y",get:function(){return this.reference.transform3D.concatenatedCoordinates.y}},{key:"z",get:function(){return this.reference.transform3D.concatenatedCoordinates.z}},{key:"rotX",get:function(){return this.reference.transform3D.concatenatedEulerAngle.psi*o.TO_DEG}},{key:"rotY",get:function(){return this.reference.transform3D.concatenatedEulerAngle.theta*o.TO_DEG}},{key:"rotZ",get:function(){return this.reference.transform3D.concatenatedEulerAngle.phi*o.TO_DEG}}]),t}();e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=0,r=["transform","WebkitTransform","msTransform","MozTransform","OTransform"],i=["transformOrigin","WebkitTransformOrigin","msTransformOrigin","MozTransformOrigin","OTransformOrigin"],o=["perspective","WebkitPerspective","msPerspective","MozPerspective","OPerspective"],a=["perspectiveOrigin","WebkitPerspectiveOrigin","msPerspectiveOrigin","MozPerspectiveOrigin","OPerspectiveOrigin"];try{for(var s,u=document.createElement("div"),l=0,c=r.length;l<c;l++)if(s=r[l],"undefined"!=typeof u.style[s]){n=l;break}}catch(t){}var h={transform:r[n],transformOrigin:i[n],perspective:o[n],perspectiveOrigin:a[n]};e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(4),d=r(f),y=n(11),p=r(y),v=n(12),g=r(v),m=function(t){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!t)throw new Error("::DOM3D:: No element/selector/markup was given to Stage3D constructor.");return a.element=(0,g.default)(t),a.id=a.element.hasAttribute("id")?a.element.attributes.id.value:"stage_"+l.default.idCount++,a.element.dom3dObject=a,a.registeredChildren=[],a.lowestZIndex=0,a.updateInterval=0,a.stage=a,a.distortion=6,a.zoom=5e3,a.children=[],a.isGroup=!0,a.matrix=new h.default,a.transform3D=new d.default,a._FPS=r,a._autoRender=!1,a.autoRender=n,a._orthographic=!1,a.effects=[],a}return a(e,t),s(e,[{key:"add",value:function(){for(var t=0,n=arguments.length;t<n;t++){var r=arguments[t];if(r instanceof e)throw new Error("::DOM3D:: You cannot add a Stage3D to a group!");this.contains(r)||(null!==r.parent&&r.parent.remove(r),this.children.push(r),this.stage&&this.stage.registerChild(r),r.parent=this,this.element!==r.element.parentElement&&this.element.appendChild(r.element),r.element.style.display="block",r.element.style.position="absolute")}return this.render(!1),this.stage&&this.stage.sort(),this}},{key:"remove",value:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t],r=this.children.indexOf(n);r>-1&&(this.children.splice(r,1),this.stage&&this.stage.unregisterChild(n),n.parent=null,n.element.remove())}return this}},{key:"contains",value:function(t){return this.children.indexOf(t)>-1}},{key:"getChildById",value:function(t){var e,n;for(e=0,n=this.children.length;e<n;e++)if(this.children[e].id==t)return this.children[e];return null}},{key:"getChildByElement",value:function(t){var e,n;for(e=0,n=this.children.length;e<n;e++)if(this.children[e].element==t)return this.children[e];return null}},{key:"registerChild",value:function(t){if(t.isGroup){var e,n,r=t.children;for(t.setStage(this),e=0,n=r.length;e<n;e++)this.registerChild(r[e])}else this.registeredChildren.indexOf(t)==-1&&(this.registeredChildren.push(t),t.setStage(this))}},{key:"unregisterChild",value:function(t){var e=this.registeredChildren.indexOf(t);if(t.isGroup){var n,r,i=t.children;for(n=0,r=i.length;n<r;n++)this.unregisterChild(i[n])}else e>-1&&(this.registeredChildren.splice(e,1),t.setStage(null))}},{key:"update",value:function(){var t=this.element.dispatchEvent(new p.default(p.default.UPDATE));return!!t&&(this.render(),this.sort(),this.element.dispatchEvent(new p.default(p.default.AFTER_UPDATE)),!0)}},{key:"render",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(t=0,e=this.children.length;t<e;t++)this.children[t].render(n)}},{key:"sort",value:function(){var t,e=this.lowestZIndex;for(this.registeredChildren.sort(function(t,e){return e.transform3D.concatenatedCoordinates.z-t.transform3D.concatenatedCoordinates.z}),t=this.registeredChildren.length-1;t>-1;t--)this.registeredChildren[t].element.style.zIndex=e++}},{key:"orthographic",get:function(){return this._orthographic},set:function(t){t!=this._orthographic&&(this._dirty=!0,this._orthographic=t)}},{key:"numChildren",get:function(){return this.children.length}},{key:"autoRender",get:function(){return this._autoRender},set:function(t){if(t!==this._autoRender){if(t){var e=this.update.bind(this);this.updateInterval=setInterval(e,1e3/this._FPS),setTimeout(e,1)}else this.updateInterval&&clearInterval(this.updateInterval);this._autoRender=t}}},{key:"FPS",get:function(){return this._FPS},set:function(t){t!==this._FPS&&(this._FPS=t,this._autoRender&&(this.autoRender=!1,this.autoRender=!0))}}]),e}(l.default);e.default=m},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){n(this,t);var r;if(e===t.UPDATE)r={bubbles:!1,cancelable:!0};else{if(e!==t.AFTER_UPDATE)throw new Error("::DOM3D:: Invalid StageEvent type.");r={bubbles:!1,cancelable:!1}}if("function"==typeof Event)return new Event(e,r);void 0===r&&(r={});var i=document.createEvent("Event");return i.initEvent(e,!!r.bubbles,!!r.cancelable),i}return r(t,null,[{key:"UPDATE",get:function(){return"stageupdate"}},{key:"AFTER_UPDATE",get:function(){return"afterstageupdate"}}]),t}();e.default=i},function(t,e){"use strict";function n(t){if(!t)return document.createElement("div");if(t instanceof HTMLElement)return t;if("object"===("undefined"==typeof t?"undefined":i(t)))return r(t);if("string"==typeof t){if("<"===t.charAt(0)){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}return document.querySelector(t)}throw new Error("::DOM3D:: Invalid content given for creation of element.")}function r(t){var e=document.createElement(t.type||(t.src?"img":"div"));return t.id&&e.setAttribute("id",t.id),t.className&&"string"==typeof t.className&&(e.className=t.className),t.className&&Array.isArray(t.className)&&(e.className=t.className.join(" ")),t.content&&(e.innerHTML=t.content),t.innerHTML&&(e.innerHTML=t.innerHTML),t.src&&(e.src=t.src),t.alt&&(e.alt=t.alt),e}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(10),h=r(c),f=n(2),d=r(f),y=n(4),p=r(y),v=n(12),g=r(v),m=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.element=(0,g.default)(t),n.id=n.element.hasAttribute("id")?n.element.attributes.id.value:"group_"+l.default.idCount++,n.element.dom3dObject=n,n.matrix=new d.default,n.transform3D=new p.default,n._orthographic=!1,n.children=[],n.isGroup=!0,n}return a(e,t),s(e,[{key:"add",value:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];if(n===this)throw new Error("::DOM3D:: You cannot add a 3D group to itself!");if(n instanceof h.default)throw new Error("::DOM3D:: You cannot add a Stage3D to a group!");this.contains(n)||(null!==n.parent&&n.parent.remove(n),this.children.push(n),this.stage&&this.stage.registerChild(n),n.parent=this,this.element!==n.element.parentElement&&this.element.appendChild(n.element),n.element.style.display="block",n.element.style.position="absolute")}return this.stage&&(this.render(!1),this.stage.sort()),this}},{key:"remove",value:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t],r=this.children.indexOf(n);r>-1&&(this.children.splice(r,1),this.stage&&this.stage.unregisterChild(n),n.parent=null,n.element.remove())}return this}},{key:"contains",value:function(t){return this.children.indexOf(t)>-1}},{key:"getChildById",value:function(t){var e,n;for(e=0,n=this.children.length;e<n;e++)if(this.children[e].id===t)return this.children[e];return null}},{key:"getChildByElement",value:function(t){var e,n;for(e=0,n=this.children.length;e<n;e++)if(this.children[e].element===t)return this.children[e];return null}},{key:"render",value:function(t){var e,n;if(this._dirty||t){for(this.updateWorld(),this.rotateCoords(),e=0,n=this.children.length;e<n;e++)this.children[e].render(t||this._dirty);this._dirty=!1}else for(e=0,n=this.children.length;e<n;e++)this.children[e].render(!1)}},{key:"numChildren",get:function(){return this.children.length}},{key:"orthographic",get:function(){return this._orthographic},set:function(t){t!=this._orthographic&&(this._dirty=!0,this._orthographic=t)}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(4),d=r(f),y=n(12),p=r(y),v=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.element=(0,p.default)(t),n.id=n.element.hasAttribute("id")?n.element.attributes.id.value:"element_"+l.default.idCount++,n.element.dom3dObject=n,n.lockFacingFront=!1,n.transformMatrix=new h.default,n.transform3D=new d.default,n}return a(e,t),s(e,[{key:"render",value:function(t){(this._dirty||t)&&(this._dirty=!1,this.updateWorld(),this.rotateCoords(),this.lockFacingFront?this.transformMatrix.zero():this.rotateObject(),this.renderObject())}}]),e}(l.default);e.default=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(4),d=r(f),y=n(12),p=r(y),v=function(t){function e(t,n,r){function a(t,e){var n=document.createElement("div");return n.style.position="absolute",n.style.top=e+"px",n.style.left=t+"px",v.element.appendChild(n),n}i(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));s.front=null,s.back=null,s.frontFacing=!0,s.element=(0,p.default)(t),s.id=s.element.hasAttribute("id")?s.element.attributes.id.value:"paperelement_"+l.default.idCount++,s.element.dom3dObject=s;var u,c;document.querySelector&&(u=s.element.querySelector(".dom3d-front"),c=s.element.querySelector(".dom3d-back"));var f=(0,p.default)(n||u),y=(0,p.default)(r||c);s.front=f,s.back=y,s.front.style.position="absolute",s.back.style.position="absolute",s.element.appendChild(s.front),s.element.appendChild(s.back),s.transformMatrix=new h.default,s.transform3D=new d.default;var v=s;return s.p1=a(0,0),s.p2=a(100,0),s.p3=a(0,100),s}return a(e,t),s(e,[{key:"render",value:function(t){(this._dirty||t)&&(this.updateWorld(),this.rotateCoords(),this.rotateObject(),this.renderObject(),this._dirty=!1,this.determineFace())}},{key:"determineFace",value:function(){var t=this.p1.getBoundingClientRect(),e=this.p2.getBoundingClientRect(),n=this.p3.getBoundingClientRect(),r=t.left,i=t.top,o=e.left,a=e.top,s=n.left,u=n.top;this.frontFacing=(o-r)*(u-i)-(a-i)*(s-r)>0,this.back&&(this.back.style.visibility=this.frontFacing?"hidden":"visible",this.back.style.pointerEvents=this.frontFacing?"none":""),this.front&&(this.front.style.visibility=this.frontFacing?"visible":"hidden",this.front.style.pointerEvents=this.frontFacing?"":"none");
}}]),e}(l.default);e.default=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(5),s=r(a),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,t),this.strength=e,this.trueDistance=n,this.focus=r||{x:0,y:0,z:0}}return o(t,[{key:"render",value:function(t){if(!t.isGroup){var e=t.transform3D.concatenatedCoordinates,n=this.trueDistance?s.default.distance(this.focus,e):Math.abs(this.focus.z-e.z),r=this.strength*(n/t.stage.zoom)*25,i="blur("+r+"px)";t.style.filter!==i&&(t.style.filter=t.style.webkitFilter=i)}}}]),t}();e.default=u}]);
//# sourceMappingURL=dom3d.min.js.map