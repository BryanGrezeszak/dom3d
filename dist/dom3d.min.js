!function(t){function e(r){if(n[r])return n[r].exports;var module=n[r]={exports:{},id:r,loaded:!1};return t[r].call(module.exports,module,module.exports,e),module.loaded=!0,module.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(module,t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t||(t=window),t.DisplayObject3D=o.default,t.Stage3D=s.default,t.Group3D=l.default,t.Element3D=h.default,t.PaperElement3D=d.default,t.StageEvent=E.default,t.DepthOfField=z.default,e&&(t.Point3D=p.default,t.Matrix3x3=g.default,t.EulerAngle=b.default,t.Quaternion=w.default,t.Transform3D=O.default),n&&(t.spread=r)}var i=e(1),o=n(i),a=e(10),s=n(a),u=e(13),l=n(u),c=e(14),h=n(c),f=e(15),d=n(f),y=e(5),p=n(y),v=e(2),g=n(v),m=e(7),b=n(m),_=e(6),w=n(_),k=e(4),O=n(k),x=e(11),E=n(x),D=e(16),z=n(D),P={spread:r,DisplayObject3D:o.default,Stage3D:s.default,Group3D:l.default,Element3D:h.default,PaperElement3D:d.default,StageEvent:E.default,DepthOfField:z.default,Point3D:p.default,Matrix3x3:g.default,EulerAngle:b.default,Quaternion:w.default,Transform3D:O.default};module.exports=P,"undefined"!=typeof window&&(window.dom3d={},r(window.dom3d,!0,!0))},function(module,t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e(2),a=n(o),s=e(4),u=n(s),l=e(8),c=n(l),h=e(3),f=e(9),d=n(f),y=function(){function t(){r(this,t),this._x=0,this._y=0,this._z=0,this._rotX=0,this._rotY=0,this._rotZ=0,this._regX=0,this._regY=0,this._dirty=!0,this.matrix=new a.default,this.transform3D=new u.default,this.id="",this.element=null,this.stage=null,this.parent=null,this.calc=new c.default(this)}return i(t,[{key:"addEventListener",value:function(){throw new Error(p)}},{key:"removeEventListener",value:function(){throw new Error(p)}},{key:"dispatchEvent",value:function(){throw new Error(p)}},{key:"addListener",value:function(t,e,n,r){return this.element.addEventListener(t,e,n,r)}},{key:"removeListener",value:function(t,e,n){return this.element.removeEventListener(t,e,n)}},{key:"dispatch",value:function(t){return this.element.dispatchEvent(t)}},{key:"setStage",value:function(t){this.stage=t}},{key:"render",value:function(t){throw new Error("::DOM3D:: DisplayObject3D can not be part of the 3D scene, it is only a base class.")}},{key:"updateWorld",value:function(){this.transform3D.copyConcatenated(this.parent.transform3D),this.transform3D.eulerAngle.updateData(this._rotZ*h.TO_RAD,this._rotY*h.TO_RAD,this._rotX*h.TO_RAD),this.transform3D.quaternion.updateFromEuler(this.transform3D.eulerAngle),this.transform3D.coordinates.updateData(this._x,this._y,this._z),this.transform3D.concatenatedQuaternion.concatenate(this.transform3D.quaternion),this.transform3D.concatenatedEulerAngle.updateFromQuaternion(this.transform3D.concatenatedQuaternion)}},{key:"rotateCoords",value:function(){this.transform3D.concatenatedCoordinates.rotateAndUpdate(this.transform3D.coordinates,this.parent.transform3D.concatenatedEulerAngle)}},{key:"rotateObject",value:function(){this.transformMatrix.updateFromEuler(this.transform3D.concatenatedEulerAngle)}},{key:"renderObject",value:function(){var t=this.transformMatrix,e=this.stage.zoom,n=this.transform3D.concatenatedCoordinates,r=this.parent.orthographic||this.stage.orthographic?this.parent.transform3D.concatenatedCoordinates.z:n.z;if(r>e)return void(this.element.style.display="none");"none"===this.element.style.display&&(this.element.style.display="block");var i=e/(e-r),o=Math.pow(i,this.stage.distortion);t.tx=n.x*i,t.ty=n.y*i,t.scale(o);var a=this.regX*i*o,s=this.regY*i*o,u="matrix("+t.a.toFixed(8)+","+t.b.toFixed(8)+","+t.c.toFixed(8)+","+t.d.toFixed(8)+","+(t.tx-a).toFixed(8)+","+(t.ty-s).toFixed(8)+")",l=this.regX+"px "+this.regY+"px";this.element.style[d.default.transform]=u,this.element.style[d.default.transformOrigin]=l;for(var c=0,h=this.stage.effects.length;c<h;c++){var f=this.stage.effects[c];f.render(this)}}},{key:"x",get:function(){return this._x},set:function(t){t!=this._x&&(this._dirty=!0,this._x=t)}},{key:"y",get:function(){return this._y},set:function(t){t!=this._y&&(this._dirty=!0,this._y=t)}},{key:"z",get:function(){return this._z},set:function(t){t!=this._z&&(this._dirty=!0,this._z=t)}},{key:"rotX",get:function(){return this._rotX},set:function(t){t!=this._rotX&&(this._dirty=!0,this._rotX=t)}},{key:"rotY",get:function(){return this._rotY},set:function(t){t!=this._rotY&&(this._dirty=!0,this._rotY=t)}},{key:"rotZ",get:function(){return this._rotZ},set:function(t){t!=this._rotZ&&(this._dirty=!0,this._rotZ=t)}},{key:"regX",get:function(){return this._regX},set:function(t){t!=this._regX&&(this._dirty=!0,this._regX=t)}},{key:"regY",get:function(){return this._regY},set:function(t){t!=this._regY&&(this._dirty=!0,this._regY=t)}},{key:"style",get:function(){return this.element.style}}]),t}();t.default=y,y.idCount=0;var p="::DOM3D:: Events are handled on the `.element` property. You may access it directly, or use the `addListener`, `.removeListener`, and `.dispatch` shortcuts."},function(module,t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=e(3),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,t),this.a=e,this.b=r,this.c=i,this.d=o,this.tx=a,this.ty=s}return r(t,[{key:"scale",value:function(t){this.a*=t,this.b*=t,this.c*=t,this.d*=t,this.tx*=t,this.ty*=t}},{key:"zero",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}},{key:"copy",value:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty}},{key:"updateFromEuler",value:function(t){var e=(0,i.sin)(t.phi),n=(0,i.cos)(t.phi),r=(0,i.sin)(t.theta),o=(0,i.cos)(t.theta),a=(0,i.sin)(t.psi),s=(0,i.cos)(t.psi),u=n*s,l=e*s,c=r*a,h=c+o,f=c-o,d=-n*f+l,y=-e*f-u,p=-n*h+l,v=-e*h-u;this.a=(d-p)/2,this.b=(y-v)/2,this.c=-(d+p)/2,this.d=-(y+v)/2}},{key:"toString",value:function(){return"{a:"+this.a+", b:"+this.b+", c:"+this.c+", d:"+this.d+", tx:"+this.tx+", ty:"+this.ty+"}"}}]),t}();t.default=o},function(module,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=(t.asin=Math.asin,t.sqrt=Math.sqrt,t.atan2=Math.atan2,t.cos=Math.cos,t.sin=Math.sin,t.PI=Math.PI);t.TO_RAD=e/180,t.TO_DEG=180/e},function(module,t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e(5),a=n(o),s=e(6),u=n(s),l=e(7),c=n(l),h=function(){function t(){r(this,t),this.coordinates=new a.default,this.concatenatedCoordinates=new a.default,this.quaternion=new u.default,this.concatenatedQuaternion=new u.default,this.eulerAngle=new c.default,this.concatenatedEulerAngle=new c.default}return i(t,[{key:"copyConcatenated",value:function(t){this.concatenatedCoordinates.copy(t.concatenatedCoordinates),this.concatenatedQuaternion.copy(t.concatenatedQuaternion),this.concatenatedEulerAngle.copy(t.concatenatedEulerAngle)}},{key:"copyInverseConcatenated",value:function(t){this.concatenatedCoordinates.copyInverse(t.concatenatedCoordinates),this.concatenatedQuaternion.copyInverse(t.concatenatedQuaternion),this.concatenatedEulerAngle.updateFromQuaternion(concatenatedQuaternion)}},{key:"copyLocal",value:function(t){this.coordinates.copy(t.coordinates),this.quaternion.copy(t.quaternion),this.eulerAngle.copy(t.eulerAngle)}},{key:"copy",value:function(t){this.coordinates.copy(t.coordinates),this.concatenatedCoordinates.copy(t.concatenatedCoordinates),this.quaternion.copy(t.quaternion),this.concatenatedQuaternion.copy(t.concatenatedQuaternion),this.eulerAngle.copy(t.eulerAngle),this.concatenatedEulerAngle.copy(t.concatenatedEulerAngle)}},{key:"zero",value:function(){this.coordinates.zero(),this.concatenatedCoordinates.zero(),this.quaternion.zero(),this.concatenatedQuaternion.zero(),this.eulerAngle.zero(),this.concatenatedEulerAngle.zero()}},{key:"toString",value:function(){return"local coordinates: "+this.coordinates.toString()+"\nworld coordinates: "+this.concatenatedCoordinates.toString()+"\nlocal quaternion : "+this.quaternion.toString()+"\nworld quaternion : "+this.concatenatedQuaternion.toString()+"\nlocal euler angle: "+this.eulerAngle.toString()+"\nworld euler angle: "+this.concatenatedEulerAngle.toString()}}]),t}();t.default=h},function(module,t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=e(3),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,t),this.x=e,this.y=r,this.z=i}return r(t,[{key:"updateData",value:function(t,e,n){this.x=t,this.y=e,this.z=n}},{key:"rotateAndUpdate",value:function(t,e){var n,r,o,a,s,u,l=e.phi,c=e.theta,h=e.psi,f=(0,i.sin)(l),d=(0,i.cos)(l),y=(0,i.sin)(c),p=(0,i.cos)(c),v=(0,i.sin)(h),g=(0,i.cos)(h),m=t.x,b=t.y,_=t.z;n=g*b-v*_,r=v*b+g*_,a=p*r-y*m,o=y*r+p*m,s=d*o-f*n,u=f*o+d*n,this.x+=s,this.y+=u,this.z+=a}},{key:"clone",value:function(){return new t(this.x,this.y,this.z)}},{key:"copy",value:function(t){this.x=t.x,this.y=t.y,this.z=t.z}},{key:"copyInverse",value:function(t){this.x=-t.x,this.y=-t.y,this.z=-t.z}},{key:"zero",value:function(){this.x=0,this.y=0,this.z=0}},{key:"toString",value:function(){return"{x:"+this.x+", y:"+this.y+", z:"+this.z+"}"}}],[{key:"rotate",value:function(e,n){var r,o,a,s,u,l,c=n.phi,h=n.theta,f=n.psi,d=(0,i.sin)(c),y=(0,i.cos)(c),p=(0,i.sin)(h),v=(0,i.cos)(h),g=(0,i.sin)(f),m=(0,i.cos)(f),b=e.x,_=e.y,w=e.z;return r=m*_-g*w,o=g*_+m*w,s=v*o-p*b,a=p*o+v*b,u=y*a-d*r,l=d*a+y*r,new t(u,l,s)}},{key:"distance",value:function(t,e){var n=Math.pow(e.x-t.x,2),r=Math.pow(e.y-t.y,2),i=Math.pow(e.z-t.z,2);return Math.sqrt(n+r+i)}}]),t}();t.default=o},function(module,t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e(7),a=n(o),s=e(3),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.w=e,this.x=n,this.y=i,this.z=o}return i(t,[{key:"updateData",value:function(t,e,n,r){this.w=t,this.x=e,this.y=n,this.z=r}},{key:"concatenate",value:function(t){var e=t.w,n=t.x,r=t.y,i=t.z,o=this.w,a=this.x,s=this.y,u=this.z,l=e*o-n*a-r*s-i*u,c=e*a+n*o+r*u-i*s,h=e*s-n*u+r*o+i*a,f=e*u+n*s-r*a+i*o;this.w=l,this.x=c,this.y=h,this.z=f}},{key:"toEuler",value:function(){var t,e,n,r=(this.w*this.w,this.x*this.x),i=this.y*this.y,o=this.z*this.z,u=this.w*this.y-this.z*this.x;return u>.499999?(t=-2*(0,s.atan2)(this.w,this.x),e=Math.PI/2,n=Math.PI,new a.default(t,e,n)):u<-.499999?(t=-2*(0,s.atan2)(this.w,this.x),e=-Math.PI/2,n=Math.PI,new a.default(t,e,n)):(t=(0,s.atan2)(2*(this.w*this.x+this.y*this.z),1-2*(r+i)),e=(0,s.asin)(2*u),n=(0,s.atan2)(2*(this.w*this.z+this.x*this.y),1-2*(i+o)),new a.default(t,e,n))}},{key:"updateFromEuler",value:function(t){var e=t.phi/2,n=t.theta/2,r=t.psi/2,i=(0,s.sin)(e),o=(0,s.cos)(e),a=(0,s.sin)(n),u=(0,s.cos)(n),l=(0,s.sin)(r),c=(0,s.cos)(r);this.w=o*u*c+i*a*l,this.x=i*u*c-o*a*l,this.y=o*a*c+i*u*l,this.z=o*u*l-i*a*c}},{key:"normalize",value:function(){var t=(0,s.sqrt)(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z);this.w/=t,this.x/=t,this.y/=t,this.z/=t}},{key:"clone",value:function(){return new t(this.w,this.x,this.y,this.z)}},{key:"copy",value:function(t){this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z}},{key:"copyInverse",value:function(t){var e=t.w,n=t.x,r=t.y,i=t.z,o=e*e+n*n+r*r+i*i;this.w=e/o,this.x=-n/o,this.y=-r/o,this.z=-i/o}},{key:"zero",value:function(){this.w=1,this.x=0,this.y=0,this.z=0}},{key:"toString",value:function(){return"{w:"+this.w+", x:"+this.x+", y:"+this.y+", z:"+this.z+"}"}}],[{key:"multiply",value:function(e,n){var r=e.w,i=n.w,o=e.x,a=n.x,s=e.y,u=n.y,l=e.z,c=n.z,h=r*i-o*a-s*u-l*c,f=r*a+o*i+s*c-l*u,d=r*u-o*c+s*i+l*a,y=r*c+o*u-s*a+l*i;return new t(h,f,d,y)}}]),t}();t.default=u},function(module,t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e(6),a=n(o),s=e(3),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),this.phi=e,this.theta=n,this.psi=i}return i(t,[{key:"updateData",value:function(t,e,n){this.phi=t,this.theta=e,this.psi=n}},{key:"updateFromQuaternion",value:function(t){var e=t.w,n=t.x,r=t.y,i=t.z,o=n*n,a=r*r,u=i*i,l=e*r-i*n;return l>.499999?(this.phi=-2*(0,s.atan2)(e,n),this.theta=Math.PI/2,void(this.psi=Math.PI)):l<-.499999?(this.phi=-2*(0,s.atan2)(e,n),this.theta=-Math.PI/2,void(this.psi=Math.PI)):(this.phi=(0,s.atan2)(2*(e*n+r*i),1-2*(o+a)),this.theta=(0,s.asin)(2*l),void(this.psi=(0,s.atan2)(2*(e*i+n*r),1-2*(a+u))))}},{key:"toQuaternion",value:function(){var t=this.phi/2,e=this.theta/2,n=this.psi/2,r=(0,s.sin)(t),i=(0,s.cos)(t),o=(0,s.sin)(e),u=(0,s.cos)(e),l=(0,s.sin)(n),c=(0,s.cos)(n),h=i*u*c+r*o*l,f=r*u*c-i*o*l,d=i*o*c+r*u*l,y=i*u*l-r*o*c;return new a.default(h,f,d,y)}},{key:"clone",value:function(){return new t(this.phi,this.theta,this.psi)}},{key:"copy",value:function(t){this.phi=t.phi,this.theta=t.theta,this.psi=t.psi}},{key:"zero",value:function(){this.phi=0,this.theta=0,this.psi=0}},{key:"toString",value:function(){return"{phi:"+this.phi+", theta:"+this.theta+", psi:"+this.psi+"}"}}]),t}();t.default=u},function(module,t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=e(3),o=function(){function t(e){n(this,t),Object.defineProperty(this,"reference",{enumerable:!1,value:e})}return r(t,[{key:"toString",value:function(){return"{x:"+this.x+", y:"+this.y+", z:"+this.z+", rotX:"+this.rotX+", rotY:"+this.rotY+", rotZ:"+this.rotZ+"}"}},{key:"x",get:function(){return this.reference.transform3D.concatenatedCoordinates.x}},{key:"y",get:function(){return this.reference.transform3D.concatenatedCoordinates.y}},{key:"z",get:function(){return this.reference.transform3D.concatenatedCoordinates.z}},{key:"rotX",get:function(){return this.reference.transform3D.concatenatedEulerAngle.psi*i.TO_DEG}},{key:"rotY",get:function(){return this.reference.transform3D.concatenatedEulerAngle.theta*i.TO_DEG}},{key:"rotZ",get:function(){return this.reference.transform3D.concatenatedEulerAngle.phi*i.TO_DEG}}]),t}();t.default=o},function(module,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=0,n=["transform","WebkitTransform","msTransform","MozTransform","OTransform"],r=["transformOrigin","WebkitTransformOrigin","msTransformOrigin","MozTransformOrigin","OTransformOrigin"],i=["perspective","WebkitPerspective","msPerspective","MozPerspective","OPerspective"],o=["perspectiveOrigin","WebkitPerspectiveOrigin","msPerspectiveOrigin","MozPerspectiveOrigin","OPerspectiveOrigin"];try{for(var a,s=document.createElement("div"),u=0,l=n.length;u<l;u++)if(a=n[u],"undefined"!=typeof s.style[a]){e=u;break}}catch(t){}var c={transform:n[e],transformOrigin:r[e],perspective:i[e],perspectiveOrigin:o[e]};t.default=c},function(module,t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(1),u=n(s),l=e(2),c=n(l),h=e(4),f=n(h),d=e(11),y=n(d),p=e(12),v=n(p),g=function(t){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!t)throw new Error("::DOM3D:: No element/selector/markup was given to Stage3D constructor.");return a.element=(0,v.default)(t),a.id=a.element.hasAttribute("id")?a.element.attributes.id.value:"stage_"+u.default.idCount++,a.element.dom3dObject=a,a.registeredChildren=[],a.lowestZIndex=0,a.updateInterval=0,a.stage=a,a.distortion=6,a.zoom=5e3,a.children=[],a.isGroup=!0,a.matrix=new c.default,a.transform3D=new f.default,a._FPS=o,a._autoRender=!1,a.autoRender=n,a._orthographic=!1,a.effects=[],a}return o(e,t),a(e,[{key:"add",value:function(){for(var t=0,n=arguments.length;t<n;t++){var r=arguments[t];if(r instanceof e)throw new Error("::DOM3D:: You cannot add a Stage3D to a group!");this.contains(r)||(null!==r.parent&&r.parent.remove(r),this.children.push(r),this.stage&&this.stage.registerChild(r),r.parent=this,this.element!==r.element.parentElement&&this.element.appendChild(r.element),r.element.style.display="block",r.element.style.position="absolute")}return this.render(!1),this.stage&&this.stage.sort(),this}},{key:"remove",value:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t],r=this.children.indexOf(n);r>-1&&(this.children.splice(r,1),this.stage&&this.stage.unregisterChild(n),n.parent=null,n.element.remove())}return this}},{key:"contains",value:function(t){return this.children.indexOf(t)>-1}},{key:"getChildById",value:function(t){var e,n;for(e=0,n=this.children.length;e<n;e++)if(this.children[e].id==t)return this.children[e];return null}},{key:"getChildByElement",value:function(t){var e,n;for(e=0,n=this.children.length;e<n;e++)if(this.children[e].element==t)return this.children[e];return null}},{key:"registerChild",value:function(t){if(t.isGroup){var e,n,r=t.children;for(t.setStage(this),e=0,n=r.length;e<n;e++)this.registerChild(r[e])}else this.registeredChildren.indexOf(t)==-1&&(this.registeredChildren.push(t),t.setStage(this))}},{key:"unregisterChild",value:function(t){var e=this.registeredChildren.indexOf(t);if(t.isGroup){var n,r,i=t.children;for(n=0,r=i.length;n<r;n++)this.unregisterChild(i[n])}else e>-1&&(this.registeredChildren.splice(e,1),t.setStage(null))}},{key:"update",value:function(){var t=this.element.dispatchEvent(new y.default(y.default.UPDATE));return!!t&&(this.render(),this.sort(),this.element.dispatchEvent(new y.default(y.default.AFTER_UPDATE)),!0)}},{key:"render",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(t=0,e=this.children.length;t<e;t++)this.children[t].render(n)}},{key:"sort",value:function(){var t,e=this.lowestZIndex;for(this.registeredChildren.sort(function(t,e){return e.transform3D.concatenatedCoordinates.z-t.transform3D.concatenatedCoordinates.z}),t=this.registeredChildren.length-1;t>-1;t--)this.registeredChildren[t].element.style.zIndex=e++}},{key:"orthographic",get:function(){return this._orthographic},set:function(t){t!=this._orthographic&&(this._dirty=!0,this._orthographic=t)}},{key:"numChildren",get:function(){return this.children.length}},{key:"autoRender",get:function(){return this._autoRender},set:function(t){if(t!==this._autoRender){if(t){var e=this.update.bind(this);this.updateInterval=setInterval(e,1e3/this._FPS),setTimeout(e,1)}else this.updateInterval&&clearInterval(this.updateInterval);this._autoRender=t}}},{key:"FPS",get:function(){return this._FPS},set:function(t){t!==this._FPS&&(this._FPS=t,this._autoRender&&(this.autoRender=!1,this.autoRender=!0))}}]),e}(u.default);t.default=g},function(module,t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(){function t(n){e(this,t);var r;if(n===t.UPDATE)r={bubbles:!1,cancelable:!0};else{if(n!==t.AFTER_UPDATE)throw new Error("::DOM3D:: Invalid StageEvent type.");r={bubbles:!1,cancelable:!1}}if("function"==typeof Event)return new Event(n,r);void 0===r&&(r={});var i=document.createEvent("Event");return i.initEvent(n,!!r.bubbles,!!r.cancelable),i}return n(t,null,[{key:"UPDATE",get:function(){return"stageupdate"}},{key:"AFTER_UPDATE",get:function(){return"afterstageupdate"}}]),t}();t.default=r},function(module,t){"use strict";function e(t){if(!t)return document.createElement("div");if(t instanceof HTMLElement)return t;if("object"===("undefined"==typeof t?"undefined":r(t)))return n(t);if("string"==typeof t){if("<"===t.charAt(0)){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}return document.querySelector(t)}throw new Error("::DOM3D:: Invalid content given for creation of element.")}function n(t){var e=document.createElement(t.type||(t.src?"img":"div"));return t.id&&e.setAttribute("id",t.id),t.className&&"string"==typeof t.className&&(e.className=t.className),t.className&&Array.isArray(t.className)&&(e.className=t.className.join(" ")),t.content&&(e.innerHTML=t.content),t.innerHTML&&(e.innerHTML=t.innerHTML),t.src&&(e.src=t.src),t.alt&&(e.alt=t.alt),e}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.default=e},function(module,t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(1),u=n(s),l=e(10),c=n(l),h=e(2),f=n(h),d=e(4),y=n(d),p=e(12),v=n(p),g=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.element=(0,v.default)(t),n.id=n.element.hasAttribute("id")?n.element.attributes.id.value:"group_"+u.default.idCount++,n.element.dom3dObject=n,n.matrix=new f.default,n.transform3D=new y.default,n._orthographic=!1,n.children=[],n.isGroup=!0,n}return o(e,t),a(e,[{key:"add",value:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];if(n===this)throw new Error("::DOM3D:: You cannot add a 3D group to itself!");if(n instanceof c.default)throw new Error("::DOM3D:: You cannot add a Stage3D to a group!");this.contains(n)||(null!==n.parent&&n.parent.remove(n),this.children.push(n),this.stage&&this.stage.registerChild(n),n.parent=this,this.element!==n.element.parentElement&&this.element.appendChild(n.element),n.element.style.display="block",n.element.style.position="absolute")}return this.stage&&(this.render(!1),this.stage.sort()),this}},{key:"remove",value:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t],r=this.children.indexOf(n);r>-1&&(this.children.splice(r,1),this.stage&&this.stage.unregisterChild(n),n.parent=null,n.element.remove())}return this}},{key:"contains",value:function(t){return this.children.indexOf(t)>-1}},{key:"getChildById",value:function(t){var e,n;for(e=0,n=this.children.length;e<n;e++)if(this.children[e].id===t)return this.children[e];return null}},{key:"getChildByElement",value:function(t){var e,n;for(e=0,n=this.children.length;e<n;e++)if(this.children[e].element===t)return this.children[e];return null}},{key:"render",value:function(t){var e,n;if(this._dirty||t){for(this.updateWorld(),this.rotateCoords(),e=0,n=this.children.length;e<n;e++)this.children[e].render(t||this._dirty);this._dirty=!1}else for(e=0,n=this.children.length;e<n;e++)this.children[e].render(!1)}},{key:"numChildren",get:function(){return this.children.length}},{key:"orthographic",get:function(){return this._orthographic},set:function(t){t!=this._orthographic&&(this._dirty=!0,this._orthographic=t)}}]),e}(u.default);t.default=g},function(module,t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(1),u=n(s),l=e(2),c=n(l),h=e(4),f=n(h),d=e(12),y=n(d),p=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.element=(0,y.default)(t),n.id=n.element.hasAttribute("id")?n.element.attributes.id.value:"element_"+u.default.idCount++,n.element.dom3dObject=n,n.lockFacingFront=!1,n.transformMatrix=new c.default,n.transform3D=new f.default,n}return o(e,t),a(e,[{key:"render",value:function(t){(this._dirty||t)&&(this._dirty=!1,this.updateWorld(),this.rotateCoords(),this.lockFacingFront?this.transformMatrix.zero():this.rotateObject(),this.renderObject())}}]),e}(u.default);t.default=p},function(module,t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e(1),u=n(s),l=e(2),c=n(l),h=e(4),f=n(h),d=e(12),y=n(d),p=function(t){function e(t,n,o){function a(t,e){var n=document.createElement("div");return n.style.position="absolute",n.style.top=e+"px",n.style.left=t+"px",v.element.appendChild(n),n}r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));s.front=null,s.back=null,s.frontFacing=!0,s.element=(0,y.default)(t),s.id=s.element.hasAttribute("id")?s.element.attributes.id.value:"paperelement_"+u.default.idCount++,s.element.dom3dObject=s;var l,h;document.querySelector&&(l=s.element.querySelector(".dom3d-front"),h=s.element.querySelector(".dom3d-back"));var d=(0,y.default)(n||l),p=(0,y.default)(o||h);s.front=d,s.back=p,s.front.style.position="absolute",s.back.style.position="absolute",s.element.appendChild(s.front),s.element.appendChild(s.back),s.transformMatrix=new c.default,s.transform3D=new f.default;var v=s;return s.p1=a(0,0),s.p2=a(100,0),s.p3=a(0,100),s}return o(e,t),a(e,[{key:"render",value:function(t){(this._dirty||t)&&(this.updateWorld(),this.rotateCoords(),this.rotateObject(),this.renderObject(),this._dirty=!1,this.determineFace())}},{key:"determineFace",value:function(){var t=this.p1.getBoundingClientRect(),e=this.p2.getBoundingClientRect(),n=this.p3.getBoundingClientRect(),r=t.left,i=t.top,o=e.left,a=e.top,s=n.left,u=n.top;this.frontFacing=(o-r)*(u-i)-(a-i)*(s-r)>0,this.back&&(this.back.style.visibility=this.frontFacing?"hidden":"visible",this.back.style.pointerEvents=this.frontFacing?"none":""),this.front&&(this.front.style.visibility=this.frontFacing?"visible":"hidden",this.front.style.pointerEvents=this.frontFacing?"":"none")}}]),e}(u.default);t.default=p},function(module,t,e){"use strict";
function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e(5),a=n(o),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,t),this.strength=e,this.trueDistance=n,this.focus=i||{x:0,y:0,z:0}}return i(t,[{key:"render",value:function(t){if(!t.isGroup){var e=t.transform3D.concatenatedCoordinates,n=this.trueDistance?a.default.distance(this.focus,e):Math.abs(this.focus.z-e.z),r=this.strength*(n/t.stage.zoom)*25,i="blur("+r+"px)";t.style.filter!==i&&(t.style.filter=t.style.webkitFilter=i)}}}]),t}();t.default=s}]);
//# sourceMappingURL=dom3d.min.js.map